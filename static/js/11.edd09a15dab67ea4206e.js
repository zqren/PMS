webpackJsonp([11],{"0X+Z":function(t,e){},zed8:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("Dd8w"),o=n.n(s),a=n("9ywN"),c=n("NYxO"),i={name:"regist",data:function(){return{telphone:"",sms:"",tipIcon:"clear",count:60,btnDis:!1,primarykey:"",btnText:"发送验证码",policyChecked:!0}},components:{xBtn:a.a},computed:o()({},Object(c.c)(["phoneNum"])),created:function(){this.$title("注册"),this.$store.dispatch("getLoadState",!1)},methods:o()({},Object(c.b)(["getPhoneNum"]),{clearInput:function(){"clear"==this.tipIcon&&(this.telphone="")},resetInput:function(){this.telphone="",this.tipIcon="clear"},nextStep:function(){this.getPhoneNum(this.telphone),this.$router.push({name:"updateInfo",query:{type:"regist"}})},sendCode:function(){if(!this.telphone.match(/^(0|86|17951)?(13[0-9]|15[012356789]|17[0678]|18[0-9]|14[57])[0-9]{8}$/))return this.$toast({type:"fail",message:"手机号码错误",duration:1e3}),void(this.tipIcon="warn");this.jugeUser()},jugeUser:function(){var t=this;this.$http.post("/api/User/JudgeUser",{Telephone:this.telphone}).then(function(e){e.data.success?1==e.data.rows[0].NUM?t.$toast({type:"text",message:"该手机号已注册"}):0==e.data.rows[0].NUM&&(t.$store.dispatch("getLoadState",!0),t.getPhoneCode()):t.$toast({type:"fail",message:e.data.message})}).catch(function(t){console.log(t)})},getPhoneCode:function(){var t=this;this.$http.post("/api/WaitingForSend/SendSMS",{receiveNO:this.telphone}).then(function(e){e.data.success?(t.getPhoneNum(t.telphone),t.primarykey=e.data.primarykey,t.btnDis=!0,t.btnText="60s后重新发送",t.count--,t.startTicktock(),t.$toast({type:"success",message:e.data.message})):t.$toast({type:"fail",message:e.data.message}),t.$store.dispatch("getLoadState",!1)})},startTicktock:function(){var t=this,e=setInterval(function(){t.count>0&&t.count<=60?(t.btnDis=!0,t.btnText=t.count+"s后重新发送",t.count--):(clearInterval(e),t.btnDis=!1,t.btnText="发送验证码",t.count=60)},1e3)}})},r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"regist-box"},[n("van-cell-group",[n("van-field",{class:{"error-color":"warn"==t.tipIcon},attrs:{type:"tel",label:"手机号码",icon:t.tipIcon,placeholder:"请输入手机号码"},on:{"click-icon":t.clearInput,focus:t.resetInput},model:{value:t.telphone,callback:function(e){t.telphone=e},expression:"telphone"}}),t._v(" "),n("van-field",{attrs:{center:"",label:"短信验证码",placeholder:"请输入短信验证码",icon:"clear"},on:{"click-icon":function(e){t.sms=""}},model:{value:t.sms,callback:function(e){t.sms=e},expression:"sms"}},[n("button",{staticClass:"send-code",attrs:{slot:"button",disabled:!t.telphone||t.btnDis,type:"button"},on:{click:t.sendCode},slot:"button"},[t._v(t._s(t.btnText))])])],1),t._v(" "),n("x-btn",{attrs:{btnText:"下一步",disabled:!t.telphone||!t.sms},on:{btnEvent:t.nextStep}})],1)},staticRenderFns:[]};var l=n("VU/8")(i,r,!1,function(t){n("0X+Z")},"data-v-61bbcc52",null);e.default=l.exports}});
//# sourceMappingURL=11.edd09a15dab67ea4206e.js.map